<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Vector.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">neuralnetwork2</a> &gt; <a href="index.source.html" class="el_package">neuralnetwork.neuralnetwork.math</a> &gt; <span class="el_source">Vector.java</span></div><h1>Vector.java</h1><pre class="source lang-java linenums">package neuralnetwork.neuralnetwork.math;


import java.util.Arrays;
import java.util.stream.IntStream;
/**
 * Vector class is used for
 * doing linear algebra and getting
 * information about vectors being used.
 */
public class Vector {


    private double[] data;

    /**
     * Takes an array of double values, streams
     * through it and turns it into an array, which
     * is stored as this.data.
     * @param d (array)
     */
<span class="fc" id="L22">    public Vector(double... d) {</span>
<span class="fc" id="L23">        this.data = d;</span>
<span class="fc" id="L24">    }</span>

    /**
     * Takes an array of ints as parameter d and casts
     * them into doubles.
     * @param d - array of ints
     */
<span class="fc" id="L31">    public Vector(int... d) {</span>
<span class="fc" id="L32">        this.data = Arrays.stream(d).asDoubleStream().toArray();</span>
<span class="fc" id="L33">    }</span>

<span class="nc" id="L35">    public Vector(int size) {</span>
<span class="nc" id="L36">        data = new double[size];</span>
<span class="nc" id="L37">    }</span>

    public double[] getData() {
<span class="fc" id="L40">        return this.data;</span>
    }
    
    /**
     * 
     * @return dimensions (int) of the vector.
     */
    public int getDimensions() {
<span class="fc" id="L48">        return this.data.length;</span>
    }

    /**
     * dotProduct -- dot
     * Calculates a dot product of a vector and
     * another vector given as a parameter
     * @param other vector
     * @return dot product result (double)
     */
    public double dotProduct(Vector other) {
<span class="fc" id="L59">        return IntStream.range(0, this.getDimensions())</span>
<span class="fc" id="L60">            .mapToDouble(k -&gt; this.data[k]*other.data[k])</span>
<span class="fc" id="L61">            .sum();</span>
    }

    /**
     * map
     * 
     * A utility method used to apply different functions to
     * vector objects, such as vector multiplication.
     * @param f - a function object
     * @return Vector - the result of the function being applied
     */
    public Vector map(Function f) {
<span class="fc" id="L73">        double[] res = IntStream.range(0, this.getDimensions())</span>
<span class="fc" id="L74">            .mapToDouble(k -&gt; f.apply(this.data[k])).toArray();</span>
<span class="fc" id="L75">        Vector v = new Vector(res);</span>
<span class="fc" id="L76">        return v;</span>
    }

    /**
     * scalarAdd
     * 
     * Adds a scalar to a vector
     * 
     * @param scalar (double)
     * @return Vector
     */
    public Vector scalarAdd(double scalar) {
<span class="nc" id="L88">        return map(value -&gt; value - scalar);</span>
    }

    /**
     * scalarSubtr
     * 
     * Subtracts a scalar given as a parameter from a vector.
     * 
     * @param scalar (double)
     * @return Vector subtracted by scalar.
     */
    public Vector scalarSubtr(double scalar) {
<span class="fc" id="L100">        return map(value -&gt; value - scalar);</span>
    }

    /**
     * scalarMultiplication -- Vec mul
     * @param s double used to scale the vector
     * @return vector scaled by s
     */
    public Vector scalarProd(double s) {
<span class="fc" id="L109">        return map(value -&gt; s * value);</span>
    }

    ///// Vector on Vector operations

    /**
     * vecAdd
     * 
     * Sum of two vectors
     * 
     * @param other (Vector)
     * @return Vector summed with (Vector) other
     */
    public Vector vecAdd(Vector other) {
<span class="fc" id="L123">        double[] res = IntStream.range(0, this.getDimensions())</span>
<span class="fc" id="L124">            .mapToDouble(k -&gt; this.data[k]+other.data[k]).toArray();</span>
<span class="fc" id="L125">        return new Vector(res);</span>
    }
    
    /**
     * vecProduct -- Element product
     * 
     * Calculates a vector product of 2 vectors
     * @param other vector
     * @return vector resulting from this*other
     */
    public Vector vecElementProduct(Vector other) {
<span class="fc" id="L136">        double[] res = IntStream.range(0, this.getDimensions())</span>
<span class="fc" id="L137">            .mapToDouble(k -&gt; this.data[k]*other.getData()[k]).toArray();</span>
<span class="fc" id="L138">        return new Vector(res);</span>
    }

    /**
     * vecSubtraction -- Vec sub
     * 
     * Subtracts by a given vector
     * @param other vector
     * @return vector subtracted by other
     */
    public Vector vecSubtraction(Vector other) {
<span class="fc" id="L149">        return new Vector(IntStream.range(0, this.getDimensions())</span>
<span class="fc" id="L150">            .mapToDouble(k -&gt; this.data[k]-other.data[k])</span>
<span class="fc" id="L151">            .toArray());</span>
    }

    /**
     * getMax 
     * @return largest double in the vector array
     */
    public double getMax() {
<span class="fc" id="L159">        return Arrays.stream(this.data).reduce(Double.MIN_VALUE, Math::max);</span>
    }

    public int getIndexOfMaxElement() {
<span class="nc" id="L163">        int maxIndex = 0;</span>
<span class="nc bnc" id="L164" title="All 2 branches missed.">        for (int i = 1; i &lt; this.getDimensions(); i++) {</span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">            if (this.data[i] &gt; this.data[maxIndex]) {</span>
<span class="nc" id="L166">                maxIndex = i;</span>
            }
        }
<span class="nc" id="L169">        return maxIndex;</span>
    }

    /**
     * outerProduct
     * 
     * This is equivalent to multiplying this^T * other,
     * which results in a matrix.
     * @param other (vector)
     * @return Matrix
     */
    public Matrix outerProdut(Vector other) {
<span class="fc" id="L181">        double[][] d = new double[this.getDimensions()][other.getDimensions()];</span>

<span class="fc bfc" id="L183" title="All 2 branches covered.">        for (int i = 0; i &lt; this.getDimensions(); i++) {</span>
<span class="fc bfc" id="L184" title="All 2 branches covered.">            for (int j = 0; j &lt; other.getDimensions(); j++) {</span>
                // Notice, how the indices flipped around in setting
                // d's index. This is because the other vector needs to
                // be transposed and this is equivalent to doing so.
<span class="fc" id="L188">                d[j][i] = this.data[i] * other.data[j];</span>
            }
        }
<span class="fc" id="L191">        return new Matrix(d);</span>
    }

    @Override
    public boolean equals(Object other) {
<span class="nc bnc" id="L196" title="All 2 branches missed.">        if (this == other) {</span>
<span class="nc" id="L197">            return true;</span>
        }

<span class="nc bnc" id="L200" title="All 2 branches missed.">        if (!(other instanceof Vector)) {</span>
<span class="nc" id="L201">            return false;</span>
        }

<span class="nc" id="L204">        Vector vother = (Vector) other;</span>
        
<span class="nc" id="L206">        return Arrays.equals(this.data, vother.data);</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>